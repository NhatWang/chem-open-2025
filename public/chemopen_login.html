<!DOCTYPE html>
<html lang="vi">
<head>
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <meta charset="UTF-8">
  <title>ƒêƒÉng nh·∫≠p qu·∫£n tr·ªã</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: url(images/chemopen/CHEMOPEN.webp) no-repeat center center fixed;
  background-size: cover;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  flex-direction: column;
}

.login-container {
 background-color: #ffffff;
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  width: 90%;
  max-width: 500px;
  text-align: center;
  box-sizing: border-box;
  margin: 0 16px;
  z-index: 1;
}

    .login-container h2 {
      font-size: 22px;
      margin-bottom: 20px;
      color: #333;
    }

    .login-container h2 i {
      margin-right: 8px;
      color: #007bff;
    }

    .login-container input {
      width: 85%;
      padding: 12px 14px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      box-sizing: border-box;
    }

    .login-container button {
      width: 70%;
      padding: 12px;
      background-color: #007bff;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .login-container button:hover {
      background-color: #0056b3;
    }

    @media (max-width: 500px) {
      .login-container {
        width: 90%;
        margin: 0 10px;
        top: 55%;
      }
      .title-container {
        top: 3%;
      }
      .login-container h2 {
        font-size: 18px;
      }
      .login-container input {
        font-size: 14px;
      }
      .login-container button {
        font-size: 14px;
      }
    }

.***HIDDEN***-wrapper {
  position: relative;
}

.***HIDDEN***-wrapper input {
  width: 85%;
  padding-right: 44px; /* ƒë·ªÉ ch·ª´a ch·ªó cho icon üëÅ */
}

.toggle-***HIDDEN*** {
  position: absolute;
  top: 50%;
  right: 45px;
  transform: 
  translateY(-80%);
  cursor: pointer;
  font-size: 20px;
  color: #666;
}
.title-container {
  display: flex;
  justify-content:center;
  align-items: center;
  width: 100%;
  z-index: 1;
  padding: 0;
  margin: 0;
}

.title-image {
  max-width: 45%;
  height: auto;
  display: block;
}
.footer {
    position: relative;        
    z-index: 2;                
    text-align: center;
    font-size: 15px;
    padding: 20px 10px;
    margin-top: 15px;
    color: #000000;
    font-weight: 500;
}
  </style>
</head>
<body>
  <div class="title-container">
    <img src="images/chemopen/Title.png" alt="Title" class="title-image">
  </div>
  <form class="login-container" id="loginForm">
  <h2><i class="fa-solid fa-lock"></i> ƒêƒÇNG NH·∫¨P TRANG QU·∫¢N TR·ªä</h2>
  <input type="text" id="usernameInput" placeholder="T√™n ƒëƒÉng nh·∫≠p" required />
  <div class="***HIDDEN***-wrapper">
    <input type="***HIDDEN***" id="***HIDDEN***Input" placeholder="M·∫≠t kh·∫©u" required autocomplete="off" />
    <i class="fa-solid fa-eye toggle-***HIDDEN***" onclick="togglePassword()"></i>
  </div>
  <button type="submit">ƒêƒÇNG NH·∫¨P</button>
</form>

<script>
  function togglePassword() {
    const input = document.getElementById("***HIDDEN***Input");
    const icon = document.querySelector(".toggle-***HIDDEN***");
    input.type = input.type === "***HIDDEN***" ? "text" : "***HIDDEN***";
    icon.classList.toggle("fa-eye-slash");
    icon.classList.toggle("fa-eye");
  }

  document.getElementById("loginForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const username = document.getElementById("usernameInput").value;
  const ***HIDDEN*** = document.getElementById("***HIDDEN***Input").value;

  try {
    const response = await fetch("/api/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      credentials: "include",
      body: JSON.stringify({ username, ***HIDDEN*** }),
    });

    const data = await response.json();

    if (response.ok) {
      showToast("üéâ ƒêƒÉng nh·∫≠p th√†nh c√¥ng!", "success");
      setTimeout(() => {
        window.location.href = data.redirect;
      }, 1000);
    } else {
      showToast(data.message || "‚ùå ƒêƒÉng nh·∫≠p th·∫•t b·∫°i!");
    }
  } catch (error) {
    showToast("üö´ Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn m√°y ch·ªß.");
  }
});
  function showToast(message, type = "error") {
  const container = document.getElementById("toast-container");
  const toast = document.createElement("div");

  toast.style.cssText = `
    min-width: 240px;
    margin-bottom: 10px;
    padding: 12px 18px;
    border-radius: 6px;
    font-size: 14px;
    color: white;
    background-color: ${type === "success" ? "#28a745" : "#dc3545"};
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    animation: fadein 0.5s, fadeout 0.5s 3s;
  `;

  toast.textContent = message;
  container.appendChild(toast);

  setTimeout(() => toast.remove(), 3500);
}

// Animation (n√™n th√™m v√†o <style>)
const style = document.createElement("style");
style.innerHTML = `
  @keyframes fadein {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeout {
    from { opacity: 1; transform: translateY(0); }
    to   { opacity: 0; transform: translateY(20px); }
  }
`;
document.head.appendChild(style);

</script>
<div id="toast-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;"></div>
</div>
<script src="chemopen_index.js"></script>
<footer class="footer">
    <strong>¬© 2025 Li√™n chi H·ªôi khoa Ho√° h·ªçc,<br>
    Tr∆∞·ªùng ƒê·∫°i h·ªçc Khoa h·ªçc t·ª± nhi√™n, ƒêHQG-HCM</strong>
  </footer>
</body>
</html>