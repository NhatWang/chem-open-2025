function generateMainHTML(fullName) {
  return `
  <div style="font-family: 'Times New Roman', Times, serif; font-size: 15px; color: #000;">
    <p>ThÃ¢n chÃ o báº¡n <strong>${fullName}</strong>,</p>

    <p>Lá»i Ä‘áº§u tiÃªn, BTC xin gá»­i lá»i cáº£m Æ¡n Ä‘áº¿n báº¡n Ä‘Ã£ dÃ nh thá»i gian quan tÃ¢m vÃ  Ä‘Äƒng kÃ½ tham gia <strong style="color: #0b5394;">GIáº¢I Cáº¦U LÃ”NG CHEM-OPEN</strong>. Sá»± á»§ng há»™ cá»§a báº¡n lÃ  Ä‘á»™ng lá»±c giÃºp chÃºng mÃ¬nh ngÃ y cÃ ng hoÃ n thiá»‡n vÃ  pháº¥n Ä‘áº¥u Ä‘á»ƒ mang Ä‘áº¿n nhiá»u hÆ¡n cÃ¡c hoáº¡t Ä‘á»™ng bá»• Ã­ch vÃ  Ã½ nghÄ©a.</p>

    <h3 style="font-size: 16px;">DÆ°á»›i Ä‘Ã¢y, chÃºng mÃ¬nh xin gá»­i báº¡n má»™t sá»‘ thÃ´ng tin vá» Giáº£i Ä‘áº¥u:</h3>
    <ol style="padding-left: 20px; font-size: 14px;">
      <li><strong>NgÃ y bá»‘c thÄƒm</strong><br />- Thá»i gian: 18h00 ngÃ y 04/06/2025<br />- HÃ¬nh thá»©c: Trá»±c tuyáº¿n (BTC sáº½ thÃ´ng bÃ¡o cá»¥ thá»ƒ sau)</li>
      <li style="margin-top: 8px;"><strong>NgÃ y tiáº¿n hÃ nh giáº£i Ä‘áº¥u</strong><br />- Thá»i gian: NgÃ y 07, 08/06/2025<br />- Äá»‹a Ä‘iá»ƒm: SÃ¢n cáº§u lÃ´ng <strong>Aquaminton</strong> (1458 Ä. HoÃ i Thanh, P.14, Q.8, TP.HCM)</li>
    </ol>

    <h4 style="font-size: 16px;">LÆ°u Ã½:</h4>
    <p>Tham gia <strong>nhÃ³m Zalo cá»§a Giáº£i Ä‘áº¥u</strong> Ä‘á»ƒ nháº­n thÃ´ng bÃ¡o:<br/>
    ğŸ‘‰ <a href="https://zalo.me/g/gknpiy901" target="_blank">https://zalo.me/g/gknpiy901</a></p>

    <p>Má»i tháº¯c máº¯c, vui lÃ²ng liÃªn há»‡ BTC qua email nÃ y hoáº·c Fanpage.</p>
    <p>Háº¹n gáº·p báº¡n táº¡i giáº£i Ä‘áº¥u vÃ  chÃºc báº¡n sáº½ cÃ³ phong Ä‘á»™ tá»‘t nháº¥t táº¡i CHEM-OPEN!</p>

    <p>ThÃ¢n máº¿n,<br/>BCH LiÃªn chi Há»™i khoa HoÃ¡ há»c.</p>

    <hr style="margin-top: 30px; margin-bottom: 15px; border: none; border-top: 1px solid #ccc;" />
    <div style="text-align: center; font-size: 25px; color: #000;">
      <p><strong>__________________________________</strong></p>
      <img src="https://chem-open2025.id.vn/public/images/chemopen/lch.png" alt="Logo BCH" style="width: 200px;" />
      <p style="margin: 5px 0; color: #1a73e8;"><strong>Há»™i sinh viÃªn Viá»‡t Nam â€“ TP. Há»“ ChÃ­ Minh</strong></p>
      <p style="margin: 0; color: #1a73e8;"><strong>TrÆ°á»ng Äáº¡i há»c Khoa há»c Tá»± nhiÃªn, ÄHQG - HCM</strong></p>
      <p style="margin: 0 0 10px 0; color: #1a73e8;"><strong>BCH LiÃªn chi Há»™i khoa HÃ³a há»c</strong></p>
      <p style="margin: 10px 0 5px 0;"><strong>Fanpage:</strong> 
        <a href="https://www.facebook.com/doankhoa.lienchihoi.hoahoc.khtn/" target="_blank" style="color: #1a73e8; text-decoration: none;">
          ÄoÃ n khoa - LiÃªn Chi Há»™i khoa HÃ³a há»c ÄH.KHTN
        </a>
      </p>
      <p style="margin: 5px 0;"><strong>Hotline:</strong></p>
      <p style="margin: 2px 0;">ğŸ“ 032 620 8325 (Anh Äáº¡t â€“ LiÃªn chi Há»™i trÆ°á»Ÿng)</p>
      <p style="margin: 2px 0;">ğŸ“ 076 556 1512 (Minh Nháº­t â€“ LiÃªn chi Há»™i phÃ³)</p>
      <p style="margin: 2px 0;">ğŸ“ 079 322 6741 (TrÆ°á»ng Thá»‹nh â€“ LiÃªn chi Há»™i phÃ³)</p>
    </div>
  </div>
  `;
}

function generatePartnerHTML(partnerName, mainName) {
  return `
  <div style="font-family: 'Times New Roman', Times, serif; font-size: 15px; color: #000;">
    <p>ThÃ¢n chÃ o báº¡n <strong>${partnerName}</strong>,</p>

    <p>ChÃºng mÃ¬nh xin thÃ´ng bÃ¡o báº¡n Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ lÃ m Ä‘á»“ng Ä‘á»™i cÃ¹ng vá»›i <strong>${mainName}</strong> trong <strong style="color: #0b5394;">GIáº¢I Cáº¦U LÃ”NG CHEM-OPEN 2025</strong>.</p>

    <h3 style="font-size: 16px;">DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ thÃ´ng tin:</h3>
    <ol style="padding-left: 20px; font-size: 14px;">
      <li><strong>NgÃ y bá»‘c thÄƒm</strong><br />- Thá»i gian: 18h00 ngÃ y 04/06/2025<br />- HÃ¬nh thá»©c: Trá»±c tuyáº¿n (BTC sáº½ thÃ´ng bÃ¡o cá»¥ thá»ƒ sau)</li>
      <li style="margin-top: 8px;"><strong>NgÃ y tiáº¿n hÃ nh giáº£i Ä‘áº¥u</strong><br />- Thá»i gian: NgÃ y 07, 08/06/2025<br />- Äá»‹a Ä‘iá»ƒm: SÃ¢n cáº§u lÃ´ng <strong>Aquaminton</strong> (1458 Ä. HoÃ i Thanh, P.14, Q.8, TP.HCM)</li>
    </ol>

    <h4 style="font-size: 16px;">LÆ°u Ã½:</h4>
    <p>Tham gia <strong>nhÃ³m Zalo cá»§a Giáº£i Ä‘áº¥u</strong> Ä‘á»ƒ nháº­n thÃ´ng bÃ¡o:<br/>
    ğŸ‘‰ <a href="https://zalo.me/g/gknpiy901" target="_blank">https://zalo.me/g/gknpiy901</a></p>

    <p>Má»i tháº¯c máº¯c, vui lÃ²ng liÃªn há»‡ BTC qua email nÃ y hoáº·c Fanpage.</p>
    <p>Háº¹n gáº·p báº¡n táº¡i giáº£i Ä‘áº¥u vÃ  chÃºc báº¡n sáº½ cÃ³ phong Ä‘á»™ tá»‘t nháº¥t táº¡i CHEM-OPEN!</p>

    <p>ThÃ¢n máº¿n,<br/>BCH LiÃªn chi Há»™i khoa HoÃ¡ há»c.</p>

    <hr style="margin-top: 30px; margin-bottom: 15px; border: none; border-top: 1px solid #ccc;" />
    <div style="text-align: center; font-size: 25px; color: #000;">
      <p><strong>__________________________________</strong></p>
      <img src="https://chem-open2025.id.vn/public/images/chemopen/lch.png" alt="Logo BCH" style="width: 200px;" />
      <p style="margin: 5px 0; color: #1a73e8;"><strong>Há»™i sinh viÃªn Viá»‡t Nam â€“ TP. Há»“ ChÃ­ Minh</strong></p>
      <p style="margin: 0; color: #1a73e8;"><strong>TrÆ°á»ng Äáº¡i há»c Khoa há»c Tá»± nhiÃªn, ÄHQG - HCM</strong></p>
      <p style="margin: 0 0 10px 0; color: #1a73e8;"><strong>BCH LiÃªn chi Há»™i khoa HÃ³a há»c</strong></p>
      <p style="margin: 10px 0 5px 0;"><strong>Fanpage:</strong> 
        <a href="https://www.facebook.com/doankhoa.lienchihoi.hoahoc.khtn/" target="_blank" style="color: #1a73e8; text-decoration: none;">
          ÄoÃ n khoa - LiÃªn Chi Há»™i khoa HÃ³a há»c ÄH.KHTN
        </a>
      </p>
      <p style="margin: 5px 0;"><strong>Hotline:</strong></p>
      <p style="margin: 2px 0;">ğŸ“ 032 620 8325 (Anh Äáº¡t â€“ LiÃªn chi Há»™i trÆ°á»Ÿng)</p>
      <p style="margin: 2px 0;">ğŸ“ 076 556 1512 (Minh Nháº­t â€“ LiÃªn chi Há»™i phÃ³)</p>
      <p style="margin: 2px 0;">ğŸ“ 079 322 6741 (TrÆ°á»ng Thá»‹nh â€“ LiÃªn chi Há»™i phÃ³)</p>
    </div>
  </div>
  `;
}

function buildMainMailOptions(user, pdfBuffer) {
  return {
    to: user.email,
    subject: "THÆ¯ XÃC NHáº¬N ÄÄ‚NG KÃ THAM GIA GIáº¢I Cáº¦U LÃ”NG CHEM-OPEN 2025",
    html: generateMainHTML(user.fullName),
    attachments: [
      {
        content: pdfBuffer.toString("base64"),
        filename: `${user.paymentCode} - BiÃªn nháº­n thanh toÃ¡n giáº£i Ä‘áº¥u CHEM-OPEN 2025.pdf`,
        type: "application/pdf",
        disposition: "attachment"
      }
    ]
  };
}

function buildPartnerMailOptions(partner, mainUser, pdfBuffer) {
  return {
    to: partner.email,
    subject: "THÆ¯ XÃC NHáº¬N ÄÄ‚NG KÃ THAM GIA GIáº¢I Cáº¦U LÃ”NG CHEM-OPEN 2025",
    html: generatePartnerHTML(partner.fullName, mainUser.fullName),
    attachments: [
      {
        content: pdfBuffer.toString("base64"),
        filename: `${mainUser.paymentCode} - BiÃªn nháº­n thanh toÃ¡n giáº£i Ä‘áº¥u CHEM-OPEN 2025.pdf`,
        type: "application/pdf",
        disposition: "attachment"
      }
    ]
  };
}

module.exports = {
  generateMainHTML,
  generatePartnerHTML,
  buildMainMailOptions,
  buildPartnerMailOptions
};